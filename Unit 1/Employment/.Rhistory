library(readcsv)
url <- "https://prod-edxapp.edx-cdn.org/assets/courseware/v1/f041f6c100061fc06bc3b6320e6512fa/asset-v1:MITx+15.071x+2T2017+type@asset+block/CPSData.csv"
destfile <- "CPSData.csv"
curl::curl_download(url, destfile)
curl::curl_download(url, destfile)
?curl
read.csv("CPSData.csv")
read.csv("CPSData.csv")
CPS <- read.csv("CPSData.csv")
str(CPS)
summary(CPS)
?transform
str(CPS)
cps <- CPS
rm(CPS)
as.factor(cps$MetroAreaCode)
?as.factor
cps$MetroAreaCode <- as.factor(cps$MetroAreaCode)
str(CPS)
str(cps)
library(dplyr)
cps$MetroAreaCode %>% levels()
summary(cps$MetroAreaCode)
factor(cps$MetroAreaCode)
levels(cps$MetroAreaCode)
source('~/.active-rstudio-document')
summary(cps)
cps$Region %>% table() %>% sort()
library(dplyr)
cps$Region %>% table() %>% sort()
prop.table(cps$Citizenship)
prop.table(table(cps$Citizenship))
cps %>% subset(Hispanic = 1) %>% table()
cps %>% subset(Hispanic = 1) %>% summary()
cps %>% subset(Hispanic == 1) %>% summary()
?subset
cps %>% subset(Hispanic == 1,Race) %>% summary()
?count
str(cps)
which.min(table(cps$Region))
sort(table(cps$Region))
prop.table(table(cps$Citizenship))
library(dplyr)
cps %>% subset(cps$Hispanic = 1, col = cps$Race) %>% table()
?subset
cps %>% subset(cps$Hispanic = 1, select = cps$Race) %>% table()
cps %>% subset(cps$Hispanic = 1, select = Race) %>% table()
cps %>% subset(Hispanic = 1, select = Race) %>% table()
summary(cps)
cps %>% subset(-Hispanic = 0, select = Race) %>% table()
cps[cps["Hispanic"] == 1] %>% table()
cps[cps["Race","Hispanic"] == 1] %>% table()
cps[cps[,"Hispanic"] == 1]$Race %>% table()
cps["Race",cps[,"Hispanic"] == 1] %>% table()
cps["Race",] %>% table()
cps[cps[,"Hispanic"] == 1,"Race"] %>% table()
? %>%
cps %>% subset("Hispanic" = 0, select = "Race") %>% table()
x <- "Hispanic"
y <- "Race"
cps %>% subset(x = 0, select = y) %>% table()
cps %>% filter(x = 0, select = y) %>% table()
cps %>% filter(x == 0, select == y) %>% table()
cps %>% filter(x == 1, select == y) %>% table()
cps %>% filter(x == 1, select == y)
cps %>% filter(x == 1)
x
cps %>% filter(Hispanic == 1)
cps[cps[x] == 1,y] %>% table()
%>%
is.na(cps$Married)
is.na(cps$Married) %>% table()
?talbe
?table
select(cps,Region) %>% table(is.na(select(cps,Married)))
table(select(cps,Region),is.na(select(cps,Married)))
select(cps,Region) %>% table()
is.na(select(cps,Married)) %>% table()
select(cps,Region) %>% table(is.na(select(cps,Married)))
select(cps,Region) %>% table((is.na(select(cps,Married))))
table(CPS$Region, is.na(CPS$Married))
table(cps$Region, is.na(cps$Married))
table(cps$Region, is.na(cps$Married)) %>% plot()
table(cps$Sex, is.na(cps$Married))
table(cps$Sex, is.na(cps$Married)) %>% table()
table(cps$Sex, is.na(cps$Married)) %>% plot()
table(cps$Age, is.na(cps$Married)) %>% plot()
table(cps$Age, is.na(cps$Married))
table(cps$Citizenship, is.na(cps$Married))
prop.table(table(cps$Citizenship, is.na(cps$Married)))
?prop.table
prop.table(table(cps$Citizenship, is.na(cps$Married)),2)
table(cps$MetroAreaCode, is.na(cps$Married))
table(cps$State, is.na(cps$MetroAreaCode))
table(cps$Region, is.na(cps$MetroAreaCode)) %>% prop.table()
?tapply
table(cps$Region, is.na(cps$MetroAreaCode)) %>% tapply(mean)
tapply(cps$Region,is.na(cps$MetroAreaCode), mean)
tapply(cps$Region,is.na(cps$MetroAreaCode), mean())
tapply(is.na(cps$MetroAreaCode), cps$Region,mean)
read.csv("MetroAreaCodes.csv")
read.csv("CountryCodes.csv")
country <- read.csv("CountryCodes.csv")
area <- read.csv("MetroAreaCodes.csv")
str(area)
str(country)
metroarea <- read.csv("MetroAreaCodes.csv")
rm(area)
cps2 <- merge(cps,metroarea,by.x = "MetroAreaCode",by.y="code",all.x=TRUE)
cps2 <- merge(cps,metroarea,by.x = "MetroAreaCode",by.y="code",all.x=TRUE)
cps2 <- merge(cps,metroarea,by.x = "MetroAreaCode",by.y="Code",all.x=TRUE)
summary(cps2)
str(cps2)
cps3 <- left_join(cps2,country,by = c("CountryofBirthCode" = "Code"))
cps3 <- left_join(cps2,country,by = c("CountryOfBirthCode" = "Code"))
str(cps2)
summary(cps2)
?which.max
cps2$MetroArea %>% table() %>% sort()
library(dplyr)
cps2$MetroArea %>% table() %>% sort()
cps2$MetroArea %>% table() %>% which.max()
tapply(cps2,cps2$Hispanic,mean)
tapply(cps2$MetroArea,cps2$Hispanic,mean)
tapply(cps2$Hispanic,cps2$MetroArea,mean)
tapply(cps2$Hispanic,cps2$MetroArea,mean) %>% sort()
# number of metro areas where 20% race is asian
tapply(cps2$Race == "Asian", cps2$MetroArea,mean) %>% sort()
sort(tapply(CPS$Education == "No high school diploma", CPS$MetroArea, mean, rm.na = TRUE))
sort(tapply(cps2$Education == "No high school diploma", cps2$MetroArea, mean, rm.na = TRUE))
sort(tapply(cps2$Education == "No high school diploma", cps2$MetroArea, mean, na.rm = TRUE))
sort(tapply(cps2$Education == "No high school diploma", cps2$MetroArea, mean, na.rm = TRUE),desc)
?sort
sort(tapply(cps2$Education == "No high school diploma", cps2$MetroArea, mean, na.rm = TRUE),TRUE)
str(cps3)
summary(cps3)
# % of "New York-Northern New Jersey-Long Island, NY-NJ-PA" interviewees not born in US
checkarea <- "New York-Northern New Jersey-Long Island, NY-NJ-PA"
# % of "New York-Northern New Jersey-Long Island, NY-NJ-PA" interviewees not born in US
checkarea <- filter(cps3, MetroAreaCode = "New York-Northern New Jersey-Long Island, NY-NJ-PA")
# % of "New York-Northern New Jersey-Long Island, NY-NJ-PA" interviewees not born in US
checkarea <- filter(cps3, MetroAreaCode == "New York-Northern New Jersey-Long Island, NY-NJ-PA")
tapply(checkarea, checkarea$Country == "United States", mean)
tapply(checkarea$Country == "United States", mean)
tapply(checkarea$Country == "United States", fun = mean)
checkarea$Country == "United States" %>% mean()
checkarea$Country == "United States"
checkarea$Country == "United States"
View(checkarea)
# % of "New York-Northern New Jersey-Long Island, NY-NJ-PA" interviewees not born in US
checkarea <- filter(cps3, MetroArea == "New York-Northern New Jersey-Long Island, NY-NJ-PA")
tapply(checkarea$Country == "United States", fun = mean)
checkarea$Country == "United States" %>% mean()
tapply(checkarea$Country == "United States", fun = mean)
tapply(checkarea$Country == "United States", mean)
checkarea$Country == "United States" %>% mean()
checkarea$Country == "United States" %>% mean(na.rm = TRUE)
checkarea$Country == "United States" %>% table()
View(checkarea)
checkarea$Country == "United States" %>% mean(na.rm = TRUE)
tapply(checkarea$Country == "United States", fun = mean)
USornot <- checkarea$Country == "United States"
mean(USornot)
mean(USornot,na.rm= TRUE)
checkarea$Country <> "United States" %>% mean(na.rm=TRUE)
(checkarea$Country <> "United States") %>% mean(na.rm=TRUE)
(checkarea$Country == "United States") %>% mean(na.rm=TRUE)
(checkarea$Country != "United States") %>% mean(na.rm=TRUE)
filter(cps,Country = "India") %>% str()
filter(cps,Country == "India") %>% str()
filter(cps,cps$CountryOfBirthCode == "India") %>% str()
filter(cps,cps3$Country == "India") %>% str()
filter(cps,Country == "India")
filter(cps3,Country == "India")
filter(cps3,Country == "India") %>% str()
filter(cps3,Country == "India") %>% table(MetroArea)
filter(cps3,Country == "India") %>% table(cps3$MetroArea)
filter(cps3,Country == "India") %>% tapply(MetroArea,max)
tapply(cps3,MetroArea,max)
tapply(cps3,cps3$MetroAreaCode,max)
tapply(cps3,cps3$MetroArea,max)
tapply(cps3$Country=="India",cps3$MetroArea,max)
tapply(cps3$Country=="India",cps3$MetroArea,max,na.rm=TRUE) %>% sort(decreasing = TRUE)
tapply(cps3$Country=="India",cps3$MetroArea,na.rm=TRUE) %>% sort(decreasing = TRUE)
tapply(cps3$Country=="India",cps3$MetroArea,sum,na.rm=TRUE) %>% sort(decreasing = TRUE)
tapply(cps3$Country=="India",cps3$MetroArea,sum,na.rm=TRUE) %>% which.max()
tapply(cps3$Country=="Brazil",cps3$MetroArea,sum,na.rm=TRUE) %>% which.max()
tapply(cps3$Country=="Somalia",cps3$MetroArea,sum,na.rm=TRUE) %>% which.max()
